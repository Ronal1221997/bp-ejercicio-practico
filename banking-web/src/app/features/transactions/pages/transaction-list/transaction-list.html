<div class="page-container">
  <h1>Movimientos</h1>

  <div class="actions-bar">
    <input type="text" 
           placeholder="Buscar por cuenta o tipo..." 
           class="search-input"
           (input)="onSearch($event)">

    <button class="btn-primary" routerLink="/movimientos/nuevo">Registrar Movimiento</button>
  </div>

  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>Fecha</th>
          <th>Cuenta</th>
          <th>Tipo</th>
          <th>Monto</th>
          <th>Saldo Resultante</th>
        </tr>
      </thead>
      <tbody>
        @if (transactions$ | async; as transactions) {
          
          @for (tx of transactions; track tx.transactionId) {
            <tr>
              <td>{{ tx.date | date:'dd/MM/yyyy HH:mm' }}</td>
              <td class="font-mono">{{ tx.accountNumber }}</td>
              <td>
                <span class="type-tag">{{ tx.transactionType }}</span>
              </td>
              <td class="amount" [class.negative]="tx.transactionType === 'Retiro'">
                {{ tx.transactionType === 'Retiro' ? '-' : '+' }} 
                {{ tx.amount | currency }}
              </td>
              <td class="balance">{{ tx.newBalance | currency }}</td>
            </tr>
          } @empty {
            <tr>
              <td colspan="5" class="empty-state">No se encontraron movimientos</td>
            </tr>
          }

        }
      </tbody>
    </table>
  </div>
</div>